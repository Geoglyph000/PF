<div class="container">
  <div class="row">
    <div class="col-8 col-lg-5 px-md-5 mx-auto">

      <h3>記念日をつくる</h3>

      <% if @post.errors.any? %>
        <div id="error_explanation" class="m-2 p-3 border border-danger">
            <%= @post.errors.count %>件のエラーが発生しました</br>
            <% @post.errors.full_messages.each do |message| %>
              <%= message %></br>
            <% end %>
        </div>
      <% end %>

      <%= form_with model:@post, local:true do |f| %>
        <div class="form-group">
          <div class="row">
            <div class="col-sm-4"><label for="title">記念日の名前</label></div>
            <div class="col-sm-8"><%= f.text_field :title, placeholder: "例：サラダ記念日" %></div>
          </div>
        </div>

        <div class="form-group">
          <div class="row">
            <div class="col-sm-4"><label for="body">記念日の説明</label></div>
            <div class="col-sm-8"><%= f.text_area :body, placeholder: "『この味がいいね』と君が言った日" %></div>
          </div>
        </div>

        <div class="form-group">
          <div class="row">
            <div class="col-sm-4"><label for="date">日付</label></div>
            <div class="col-sm-8"><%= f.date_field :date %></div>
          </div>
        </div>

        <div class="form-group">
          <div class="row">
            <div class="col-sm-4"><label for="is_private">公開設定</label></div>
            <div class="col-sm-8">
              <%= f.radio_button :is_private, false, checked: true, class: 'm-1' %>
              <%= f.label :is_private, "公開" %>
              <%= f.radio_button :is_private, true, class: 'm-1' %>
              <%= f.label :is_private, "非公開" %>
            </div>
          </div>
        </div>

        <div class="form-group">
          <div class="row">
            <div class="col-sm-4"><label for ="genre">カテゴリ</label></div>
            <div class=" col-sm-8 checkbox">
              <%= collection_check_boxes(:post, :genre_ids, Genre.all, :id, :name) do |b| %>
                <%= b.label {b.check_box + " " + b.text} %></br>
              <% end %>
            </div>
          </div>
        </div>

        <%# 投稿にユーザIDを付与 %>
        <%= f.hidden_field :user_id, :value => current_user.id %>

        <div class="form-group text-center">
          <%= f.submit '記念日を登録' %>
        </div>
      <% end %>

      <%= link_to "一覧に戻る", posts_path %>

    </div>
  </div>
</div>